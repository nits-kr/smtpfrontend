import{a0 as g,u,r as c,W as r,j as e}from"./index-B-AwOab9.js";const b=()=>{const{id:n}=g(),p=u(),[l,x]=c.useState([]);console.log("logs",l);const[j,m]=c.useState({sent:0,received:0,inbox:0,spam:0}),h=c.useRef(null);return c.useEffect(()=>{var s;(s=h.current)==null||s.scrollIntoView({behavior:"smooth"})},[l]),c.useEffect(()=>{r.connected||r.connect();const s=a=>{console.log("ðŸ”¥ Socket Event Received:",a),console.log("Current Page ID:",n),m(i=>{const t={...i};t.sent+=1,a.status==="completed"&&(t.received+=1,t.inbox+=1);const o={...a,snapshotStats:{...t}};return x(d=>[...d,o]),t})};return r.on("campaign-progress",s),()=>{r.off("campaign-progress",s)}},[n]),e.jsxs("div",{className:"min-h-screen bg-black text-green-500 font-mono p-4 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("button",{onClick:()=>p(-1),className:"bg-white text-black px-3 py-1 text-sm font-bold rounded-sm hover:bg-gray-200",children:"Go Back"}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold tracking-wider text-green-600",children:n||"Unknown Campaign"}),e.jsx("div",{className:"w-20"})]}),e.jsx("div",{className:"w-full h-px bg-white/20 mb-4"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-black p-2 font-mono text-xs md:text-sm leading-relaxed scrollbar-hide",children:[e.jsxs("div",{className:"text-green-600 space-y-1",children:[e.jsx("div",{children:"Checking Inbox Status and Matching Percentage ..! GIVEN : 100%"}),e.jsx("div",{children:"Test Email Sent SucessFully..!"}),e.jsx("div",{children:"Checking Test Email Sent Status..!"}),e.jsx("div",{children:"sent successfully to 2 Subscribers out of 2"}),e.jsxs("div",{children:["Auto Sending Started with ",n,"..!"]})]}),l.length===0&&e.jsx("div",{className:"mt-4 text-green-800 animate-pulse",children:"Waiting for server stream..."}),e.jsxs("div",{className:"mt-2 space-y-1",children:[l.map((s,a)=>e.jsxs("div",{className:"whitespace-nowrap break-all hover:bg-white/5",children:[e.jsxs("span",{className:"text-green-500 font-semibold",children:["Total Mail Sent : ",s.snapshotStats.sent]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500 font-semibold",children:["Total Mail Recieved : ",s.snapshotStats.received]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500 font-semibold",children:["INBOX : ",s.snapshotStats.inbox]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500 font-semibold",children:["SPAM : ",s.snapshotStats.spam]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsx("span",{className:"text-green-500",children:"MAIL STATUS : "}),e.jsx("span",{className:"text-green-400",children:s.email}),e.jsx("span",{className:"mx-1"}),e.jsx("span",{className:s.status==="completed"?"text-green-500":"text-red-500",children:s.status==="completed"?"1":"0"}),e.jsx("span",{className:"text-sm mx-1",children:"|"}),e.jsx("span",{className:"text-green-600",children:"sidharthsidh025@yahoo.com 3"}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500",children:["Inbox Percentage : ",s.status==="completed"?"33.333":"0","%"]})]},a)),e.jsx("div",{ref:h})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 opacity-50 hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>{console.log("Simulating event...");const a={campaignId:n,status:Math.random()>.8?"failed":"completed",email:`simulated_${Math.floor(Math.random()*1e3)}@example.com`,error:null,timestamp:new Date().toISOString()};m(i=>{const t={...i};t.sent+=1,a.status==="completed"&&(t.received+=1,t.inbox+=1);const o={...a,snapshotStats:{...t}};return x(d=>[...d,o]),t})},className:"bg-gray-800 text-xs text-white px-2 py-1 rounded border border-gray-600",children:"[DEBUG] Simulate Event"})})]})};export{b as default};
