import{a as g,r as c,j as e,L as j,F as y,D as f,b as v,c as U,S as N,y as d}from"./index-ybXVoGCp.js";import{B as o}from"./Button-CQLOMxXK.js";import{I as T}from"./Input-BmMOCX-P.js";const k=g.injectEndpoints({endpoints:a=>({getUsers:a.query({query:t=>({url:"/users",params:t}),providesTags:["User"],Authorization:`Bearer ${localStorage.getItem("accessToken")}`}),createUser:a.mutation({query:t=>({url:"/users",method:"POST",body:t}),invalidatesTags:["User"]}),updateUser:a.mutation({query:({id:t,...n})=>({url:`/users/${t}`,method:"PUT",body:n}),invalidatesTags:["User"]}),deleteUser:a.mutation({query:t=>({url:`/users/${t}`,method:"DELETE"}),invalidatesTags:["User"]})})}),{useGetUsersQuery:A,useDeleteUserMutation:C}=k,D=()=>{const[a,t]=c.useState(1),[n,u]=c.useState(""),{data:r,isLoading:m,isError:E}=A({page:a,limit:10,search:"",role:"subuser"}),[x]=C(),h=(r==null?void 0:r.users)||[{_id:"1",name:"Admin",email:"admin@example.com",role:"admin",createdAt:"2026-01-01"},{_id:"2",name:"User 1",email:"user1@example.com",role:"user",createdAt:"2026-01-02"}],i=(r==null?void 0:r.totalPages)||1,p=async s=>{if((await N.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await x(s).unwrap(),d.success("User deleted successfully")}catch{d.error("Failed to delete user")}},b=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"role",label:"Role",render:s=>{var l;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${(s==null?void 0:s.role)==="admin"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:(l=s==null?void 0:s.role)==null?void 0:l.toUpperCase()})}},{key:"createdAt",label:"Joined",render:s=>{var l;return(l=s.createdAt)==null?void 0:l.slice(0,10)}},{key:"actions",label:"Actions",render:s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:e.jsx(v,{})}),e.jsx("button",{onClick:()=>p(s._id),className:"text-red-400 hover:text-red-300",children:e.jsx(U,{})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"User Management"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(T,{placeholder:"Search users...",value:n,onChange:s=>u(s.target.value),className:"w-64"}),e.jsx(j,{to:"/users/new",children:e.jsxs(o,{variant:"primary",className:"flex items-center",children:[e.jsx(y,{className:"mr-2"})," Add User"]})})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 shadow-md",children:[e.jsx(f,{columns:b,data:h,loading:m}),e.jsxs("div",{className:"p-4 border-t border-slate-700 flex justify-between items-center text-slate-400 text-sm",children:[e.jsxs("span",{children:["Page ",a," of ",i]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"secondary",size:"sm",onClick:()=>t(s=>Math.max(1,s-1)),disabled:a===1,children:"Prev"}),e.jsx(o,{variant:"secondary",size:"sm",onClick:()=>t(s=>Math.min(i,s+1)),disabled:a===i,children:"Next"})]})]})]})]})};export{D as default};
