import{u as j,J as f,r as m,P as N,j as e,Q as w,I as v,T as S,y}from"./index-B-AwOab9.js";import{B as C}from"./Button-DXxqXrNl.js";import{I as l}from"./Input-hD7tV6Ov.js";const P=[{name:"Campaigns",permissions:[{id:"campaign.create",label:"Create Campaigns"},{id:"campaign.read",label:"View Campaigns"},{id:"campaign.update",label:"Edit Campaigns"},{id:"campaign.delete",label:"Delete Campaigns"}]},{name:"Lists",permissions:[{id:"list.create",label:"Create Lists"},{id:"list.read",label:"View Lists"},{id:"list.manage",label:"Manage Contacts"},{id:"list.delete",label:"Delete Lists"}]},{name:"Reports",permissions:[{id:"reports.view",label:"View Reports"},{id:"reports.export",label:"Export Data"}]},{name:"Settings",permissions:[{id:"settings.view",label:"View Settings"},{id:"settings.manage",label:"Manage Settings"}]}],I=()=>{const u=j(),{register:r,handleSubmit:b,formState:{errors:i},reset:p}=f(),[d,n]=m.useState([]),[o,c]=m.useState(!1),[x]=N(),g=a=>{n(s=>s.includes(a)?s.filter(t=>t!==a):[...s,a])},h=async a=>{c(!0);const s={...a,role:"subuser",permissions:d};console.log("Payload to Backend:",s);const t=await x(s).unwrap();console.log("response",t),setTimeout(()=>{c(!1),y.success("Subuser created successfully (Check Console for Payload)"),p(),n([])},1e3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center bg-slate-800 p-4 rounded-lg border border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>u("/users"),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(w,{size:20})}),e.jsx("h1",{className:"text-xl font-bold text-white",children:"Add New Subuser"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg border border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-6",children:"User Details"}),e.jsxs("form",{id:"adduser-form",onSubmit:b(h),className:"space-y-4",children:[e.jsx(l,{label:"Full Name",placeholder:"Enter full name",...r("name",{required:"Name is required"}),error:i.name}),e.jsx(l,{label:"Email Address",type:"email",placeholder:"user@example.com",...r("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),error:i.email}),e.jsx(l,{label:"Password",type:"password",placeholder:"Secure password",...r("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),error:i.password})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg border border-slate-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Permissions"}),e.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"Assign access rights for this subuser."}),e.jsx("div",{className:"space-y-6",children:P.map(a=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-2 uppercase tracking-wider",children:a.name}),e.jsx("div",{className:"space-y-2",children:a.permissions.map(s=>{const t=d.includes(s.id);return e.jsxs("div",{onClick:()=>g(s.id),className:`flex items-center gap-3 p-2 rounded cursor-pointer transition-all border ${t?"bg-blue-500/20 border-blue-500 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${t?"bg-blue-500 border-blue-500":"border-slate-600"}`,children:t&&e.jsx(v,{className:"text-white text-xs"})}),e.jsx("span",{className:"text-sm",children:s.label})]},s.id)})})]},a.name))})]}),e.jsx(C,{type:"submit",form:"adduser-form",disabled:o,className:"w-full",variant:"primary",children:o?"Creating...":e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2"})," Create Subuser"]})})]})]})]})};export{I as default};
