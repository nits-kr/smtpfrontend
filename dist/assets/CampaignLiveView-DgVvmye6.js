import{a0 as m,r as o,j as e,a1 as f,u as b,W as p}from"./index-ybXVoGCp.js";import{c as j}from"./campaignsApi-Bt46_2n3.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=m("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=m("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=m("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=m("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=m("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function w({id:c}){const[h,{isLoading:l}]=j(),[i,u]=o.useState(null);if(o.useEffect(()=>{c&&(async()=>{try{const r=await h({id:c});r.data&&r.data.data&&u(r.data.data)}catch(r){console.error("Failed to fetch campaign stats:",r)}})()},[c,h]),l||!i)return e.jsx("div",{className:"flex items-center justify-center min-h-[50px] w-full",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"})});const{campaign:g,stats:s}=i,t=({icon:n,title:r,value:a,color:d,borderColor:x})=>e.jsxs("div",{className:`bg-gray-900/50 backdrop-blur-sm p-4 rounded-lg border ${x} flex items-center space-x-4 hover:bg-gray-900/80 transition-colors`,children:[e.jsx("div",{className:`p-2 rounded-lg bg-black/40 ${d}`,children:e.jsx(n,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-mono text-gray-400 uppercase tracking-wider",children:r}),e.jsx("p",{className:"text-xl font-bold text-white font-mono",children:a})]})]});return e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(t,{icon:S,title:"Total Sent",value:(s==null?void 0:s.totalSent)||0,color:"text-blue-400",borderColor:"border-blue-900/30"}),e.jsx(t,{icon:N,title:"Success",value:(s==null?void 0:s.sentCount)||0,color:"text-green-400",borderColor:"border-green-900/30"}),e.jsx(t,{icon:v,title:"Failed",value:(s==null?void 0:s.failedCount)||0,color:"text-red-400",borderColor:"border-red-900/30"}),e.jsx(t,{icon:y,title:"Opened",value:(s==null?void 0:s.totalOpens)||0,color:"text-purple-400",borderColor:"border-purple-900/30"}),e.jsx(t,{icon:k,title:"Clicked",value:(s==null?void 0:s.totalClicks)||0,color:"text-orange-400",borderColor:"border-orange-900/30"})]})})}const E=()=>{const{id:c}=f(),h=b(),[l,i]=o.useState([]);console.log("logs",l);const[u,g]=o.useState({sent:0,received:0,inbox:0,spam:0}),s=o.useRef(null);return o.useEffect(()=>{var t;(t=s.current)==null||t.scrollIntoView({behavior:"smooth"})},[l]),o.useEffect(()=>{p.connected||p.connect();const t=n=>{console.log("ðŸ”¥ Socket Event Received:",n),console.log("Current Page ID:",c),g(r=>{const a={...r};a.sent+=1,n.status==="completed"&&(a.received+=1,a.inbox+=1);const d={...n,snapshotStats:{...a}};return i(x=>[...x,d]),a})};return p.on("campaign-progress",t),()=>{p.off("campaign-progress",t)}},[c]),e.jsxs("div",{className:"min-h-screen bg-black text-green-500 font-mono p-4 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex flex-col mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("button",{onClick:()=>h(-1),className:"bg-white text-black px-3 py-1 text-sm font-bold rounded-sm hover:bg-gray-200",children:"Go Back"}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold tracking-wider text-green-600",children:c||"Unknown Campaign"}),e.jsx("div",{className:"w-100",children:e.jsx(w,{id:c})})]}),e.jsx("div",{className:"w-full h-px bg-white/20 mb-4"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-black p-2 font-mono text-xs md:text-sm leading-relaxed scrollbar-hide",children:[e.jsxs("div",{className:"text-green-600 space-y-1",children:[e.jsx("div",{children:"Checking Inbox Status and Matching Percentage ..! GIVEN : 100%"}),e.jsx("div",{children:"Test Email Sent SucessFully..!"}),e.jsx("div",{children:"Checking Test Email Sent Status..!"}),e.jsx("div",{children:"sent successfully to 2 Subscribers out of 2"}),e.jsxs("div",{children:["Auto Sending Started with ",c,"..!"]})]}),l.length===0&&e.jsx("div",{className:"mt-4 text-green-800 animate-pulse",children:"Waiting for server stream..."}),e.jsxs("div",{className:"mt-2 space-y-1",children:[l.map((t,n)=>e.jsxs("div",{className:"whitespace-nowrap break-all hover:bg-white/5",children:[e.jsxs("span",{className:"text-green-500 font-semibold",children:["Total Mail Sent : ",t.snapshotStats.sent]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500 font-semibold",children:["Total Mail Recieved : ",t.snapshotStats.received]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500 font-semibold",children:["INBOX : ",t.snapshotStats.inbox]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500 font-semibold",children:["SPAM : ",t.snapshotStats.spam]}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsx("span",{className:"text-green-500",children:"MAIL STATUS : "}),e.jsx("span",{className:"text-green-400",children:t.email}),e.jsx("span",{className:"mx-1"}),e.jsx("span",{className:t.status==="completed"?"text-green-500":"text-red-500",children:t.status==="completed"?"1":"0"}),e.jsx("span",{className:"text-sm mx-1",children:"|"}),e.jsx("span",{className:"text-green-600",children:"sidharthsidh025@yahoo.com 3"}),e.jsx("span",{className:"mx-1 text-green-700",children:"||"}),e.jsxs("span",{className:"text-green-500",children:["Inbox Percentage : ",t.status==="completed"?"33.333":"0","%"]})]},n)),e.jsx("div",{ref:s})]})]}),e.jsx("div",{className:"fixed bottom-4 right-4 opacity-50 hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>{console.log("Simulating event...");const n={campaignId:c,status:Math.random()>.8?"failed":"completed",email:`simulated_${Math.floor(Math.random()*1e3)}@example.com`,error:null,timestamp:new Date().toISOString()};g(r=>{const a={...r};a.sent+=1,n.status==="completed"&&(a.received+=1,a.inbox+=1);const d={...n,snapshotStats:{...a}};return i(x=>[...x,d]),a})},className:"bg-gray-800 text-xs text-white px-2 py-1 rounded border border-gray-600",children:"[DEBUG] Simulate Event"})})]})};export{E as default};
