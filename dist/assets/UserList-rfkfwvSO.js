import{a as g,r as d,j as e,F as j,D as y,b as f,c as v,S as U,y as c}from"./index-DVxB5hd0.js";import{B as o}from"./Button-MWfq0R2q.js";import{I as N}from"./Input-DvcK6b7F.js";const w=g.injectEndpoints({endpoints:a=>({getUsers:a.query({query:t=>({url:"/users",params:t}),providesTags:["User"]}),createUser:a.mutation({query:t=>({url:"/users",method:"POST",body:t}),invalidatesTags:["User"]}),updateUser:a.mutation({query:({id:t,...l})=>({url:`/users/${t}`,method:"PUT",body:l}),invalidatesTags:["User"]}),deleteUser:a.mutation({query:t=>({url:`/users/${t}`,method:"DELETE"}),invalidatesTags:["User"]})})}),{useGetUsersQuery:T,useDeleteUserMutation:A}=w,B=()=>{const[a,t]=d.useState(1),[l,u]=d.useState(""),{data:r,isLoading:m,isError:C}=T({page:a,limit:10,search:l}),[x]=A(),h=(r==null?void 0:r.users)||[{_id:"1",name:"Admin",email:"admin@example.com",role:"admin",createdAt:"2026-01-01"},{_id:"2",name:"User 1",email:"user1@example.com",role:"user",createdAt:"2026-01-02"}],n=(r==null?void 0:r.totalPages)||1,p=async s=>{if((await U.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await x(s).unwrap(),c.success("User deleted successfully")}catch{c.error("Failed to delete user")}},b=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"role",label:"Role",render:s=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.role==="admin"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:s.role.toUpperCase()})},{key:"createdAt",label:"Joined",render:s=>{var i;return(i=s.createdAt)==null?void 0:i.slice(0,10)}},{key:"actions",label:"Actions",render:s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:e.jsx(f,{})}),e.jsx("button",{onClick:()=>p(s._id),className:"text-red-400 hover:text-red-300",children:e.jsx(v,{})})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"User Management"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(N,{placeholder:"Search users...",value:l,onChange:s=>u(s.target.value),className:"w-64"}),e.jsxs(o,{variant:"primary",children:[e.jsx(j,{className:"mr-2"})," Add User"]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 shadow-md",children:[e.jsx(y,{columns:b,data:h,loading:m}),e.jsxs("div",{className:"p-4 border-t border-slate-700 flex justify-between items-center text-slate-400 text-sm",children:[e.jsxs("span",{children:["Page ",a," of ",n]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"secondary",size:"sm",onClick:()=>t(s=>Math.max(1,s-1)),disabled:a===1,children:"Prev"}),e.jsx(o,{variant:"secondary",size:"sm",onClick:()=>t(s=>Math.min(n,s+1)),disabled:a===n,children:"Next"})]})]})]})]})};export{B as default};
